bundle:
  name: dbxmetagen
  databricks_cli_version: ">=0.236.*"

include:
  - resources/jobs/*.yml
  - resources/schemas/*.yml

variables: 
  current_user:
    description: User deploying the bundle. Can apply to service principals as well.
    default: ${workspace.current_user.userName}
  current_working_directory:
    description: Working directory or bundle root.
    default: /Users/${var.current_user}/.bundle/${bundle.name}/${bundle.target}
  catalog_name:
    description: primary catalog where data, models, and files are stored for this project.
    default: eswanson_genai
  schema_name:
    description: primary schema where data, models, and files are stored for this project.
    default: test
    
targets:
  dev:
    mode: development
    default: true
    workspace:
      root_path: ${var.current_working_directory}
      host: https://adb-830292400663869.9.azuredatabricks.net
    permissions:
      - user_name: ${var.current_user}
        level: CAN_MANAGE

  prod:
    mode: production
    workspace:
      host: https://adb-830292400663869.9.azuredatabricks.net
      root_path: ${var.current_working_directory}
    permissions:
      - user_name: ${var.current_user}
        level: CAN_MANAGE
    run_as:
      user_name: ${var.current_user} #sp name should be used instead later.